<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vietnamese Driver's License Quiz</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
            color: #212529;
        }
        .quiz-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 30px;
        }
        .question {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .options {
            display: grid;
            grid-gap: 10px;
            margin-bottom: 20px;
        }
        .option {
            padding: 12px 15px;
            background-color: #f1f3f5;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 2px solid transparent;
        }
        .option:hover {
            background-color: #e9ecef;
        }
        .option.selected {
            border-color: #0056b3;
            background-color: #e7f1ff;
        }
        .option.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }
        .progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            flex-grow: 1;
            margin: 0 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #0056b3;
            width: 5%;
            transition: width 0.3s;
        }
        .stats {
            text-align: center;
            font-weight: 500;
            margin-bottom: 15px;
        }
        .language-switch {
            text-align: right;
            margin-bottom: 10px;
        }
        .language-switch button {
            background-color: #6c757d;
            margin-left: 5px;
            padding: 5px 10px;
            font-size: 14px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .language-switch button.active {
            background-color: #0056b3;
        }
        .hide {
            display: none;
        }
        .handbook-reference {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-left: 4px solid #0056b3;
            border-radius: 5px;
            font-size: 14px;
            line-height: 1.5;
            min-height: 20px;
            height: auto;
            overflow: auto;
            white-space: pre-line;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            background-color: #0056b3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #004494;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="language-switch">
        <button id="btn-vietnamese" class="active">Tiếng Việt</button>
        <button id="btn-english">English</button>
    </div>
    
    <h1 id="title-vi">Trắc Nghiệm Bằng Lái Xe</h1>
    <h1 id="title-en" class="hide">Driver's License Quiz</h1>
    
    <div class="quiz-container">
        <div class="progress">
            <span id="progress-text-vi">Câu hỏi 1/3</span>
            <span id="progress-text-en" class="hide">Question 1/3</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
        
        <div class="stats">
            <span id="stats-text-vi">Đúng: 0 | Sai: 0</span>
            <span id="stats-text-en" class="hide">Correct: 0 | Wrong: 0</span>
        </div>
        
        <!-- Question Display Area -->
        <div id="question" class="question"></div>
        
        <!-- Options Display Area -->
        <div id="options" class="options"></div>
        
        <!-- Handbook Reference Area -->
        <div id="handbook-reference-vi" class="handbook-reference"></div>
        <div id="handbook-reference-en" class="handbook-reference hide"></div>
        
        <div class="controls">
            <button id="prev-btn-vi">Câu trước</button>
            <button id="next-btn-vi">Câu tiếp</button>
            
            <button id="prev-btn-en" class="hide">Previous</button>
            <button id="next-btn-en" class="hide">Next</button>
        </div>
    </div>

    <script>
        // Quiz data with three questions
        const quizData = [
            {
                question: "Câu 001: Bạn phải thông báo cho DMV khi nào nếu bạn thay đổi địa chỉ?",
                options: [
                    "A. Trong vòng 5 ngày",
                    "B. Trong vòng 10 ngày",
                    "C. Trong vòng 15 ngày",
                    "D. Trong vòng 30 ngày"
                ],
                correctAnswer: 1, // B
                questionEn: "Question 001: When must you notify the DMV if you change your address?",
                optionsEn: [
                    "A. Within 5 days",
                    "B. Within 10 days",
                    "C. Within 15 days",
                    "D. Within 30 days"
                ],
                handbookRef: {
                    vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 8: Thay Đổi Địa Chỉ\nKhi bạn di chuyển, bạn phải thông báo cho DMV về địa chỉ mới của bạn trong vòng 10 ngày.",
                    en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 8: Change Your Address\nIf you move, you must notify DMV of your new address within ten days."
                }
            },
            {
                question: "Câu 002: Theo Sổ Tay Lái Xe California, người lái xe cần hiểu gì về thuốc và lái xe?",
                options: [
                    "A. Chỉ thuốc kê đơn mới có thể ảnh hưởng đến khả năng lái xe; thuốc không kê đơn luôn an toàn",
                    "B. Thuốc có thể gây buồn ngủ, nhưng điều này chỉ ảnh hưởng đến người lái xe trên 65 tuổi",
                    "C. Người lái xe có trách nhiệm biết thuốc của họ có thể ảnh hưởng thế nào đến khả năng lái xe",
                    "D. Cảnh báo về thuốc liên quan đến lái xe có thể bỏ qua nếu chuyến đi ngắn hơn 30 phút"
                ],
                correctAnswer: 2, // C
                questionEn: "Question 002: According to the California Driver's Handbook, what should drivers understand about medications and driving?",
                optionsEn: [
                    "A. Only prescription medications can affect driving ability; over-the-counter medications are always safe",
                    "B. Medications may cause drowsiness, but this only affects drivers over the age of 65",
                    "C. Drivers are responsible for knowing how their medications might affect their driving ability",
                    "D. Medication warnings about driving can be ignored if the trip is less than 30 minutes"
                ],
                handbookRef: {
                    vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 9: Thuốc\nThuốc kê đơn và thuốc không kê đơn có thể khiến bạn trở thành người lái xe không an toàn. Một số loại thuốc có thể làm bạn buồn ngủ. Bạn có trách nhiệm biết tác dụng của các loại thuốc bạn sử dụng.",
                    en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 9: Medications\nPrescription and over-the-counter medications can make you an unsafe driver. Some medicines can make you sleepy. It is your responsibility to know the effects of the medications you take."
                }
            },
            {
                question: "Câu 169: Theo Sổ Tay Lái Xe California, phương pháp được khuyến nghị khi lái xe trong điều kiện gió mạnh là gì?",
                options: [
                    "A. Giữ tốc độ bình thường để tránh bị gió giật đẩy và sử dụng ga tự động để duy trì điều khiển ổn định",
                    "B. Giảm tốc độ, giữ chắc vô lăng, không sử dụng ga tự động, và cân nhắc tấp xe vào lề nếu điều kiện nguy hiểm",
                    "C. Tăng ga khi gặp giật gió để duy trì hướng lái và luôn giữ cả hai tay trên vô lăng",
                    "D. Lái xe với cùng tốc độ của dòng xe xung quanh bất kể điều kiện gió để tránh tạo ra nguy hiểm"
                ],
                correctAnswer: 1, // B
                questionEn: "Question 169: According to the California Driver's Handbook, what is the recommended approach for driving in high winds?",
                optionsEn: [
                    "A. Maintain your normal speed to prevent being pushed by gusts and use cruise control for consistent handling",
                    "B. Reduce your speed, keep a firm grip on the steering wheel, avoid using cruise control, and consider pulling over if conditions are dangerous",
                    "C. Accelerate when gusts hit to maintain directional stability and keep both hands on the wheel at all times",
                    "D. Drive at the same speed as surrounding traffic regardless of wind conditions to avoid creating hazards"
                ],
                handbookRef: {
                    vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 63: Gió Mạnh\nGió mạnh có thể là mối nguy hiểm khi lái xe. Điều này đặc biệt đúng với các phương tiện lớn hơn như xe tải, xe cắm trại và xe có rơ-moóc. Khi lái xe trong gió mạnh:\n• Giảm tốc độ. Điều này giúp bạn kiểm soát phương tiện tốt hơn. Bạn sẽ có nhiều thời gian hơn để phản ứng nếu xe của bạn bị một cơn gió mạnh đánh vào.\n• Duy trì vị trí tay chắc chắn trên vô lăng. Gió giật mạnh là không thể đoán trước. Nếu bạn không giữ vô lăng đúng cách và một cơn gió giật xuất hiện, bạn có thể mất kiểm soát phương tiện.\n• Luôn cảnh giác. Nhìn phía trước và quan sát bất kỳ mảnh vỡ nào trên đường. Dành cho mình đủ thời gian để phản ứng với các mối nguy hiểm trên đường.\n• Không sử dụng ga tự động. Duy trì khả năng kiểm soát tối đa đối với bàn đạp ga nếu xảy ra gió giật.\n• Chủ động. Có thể an toàn hơn khi tấp xe vào lề và đợi cơn bão qua.",
                    en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 63: High Winds\nHigh winds can be a hazard while driving. This is especially true for larger vehicles such as trucks, campers, and vehicles with trailers. When driving in high winds:\n• Reduce your speed. This gives you better control over your vehicle. You will have more time to react if your vehicle gets hit by a strong gust of wind.\n• Maintain a firm hand position on the steering wheel. Strong wind gusts are unpredictable. If you are not holding the wheel properly and a gust hits, you can lose control of the vehicle.\n• Be alert. Look ahead and watch for any debris on the road. Give yourself enough time to react to road hazards.\n• Do not use cruise control. Maintain maximum control of the accelerator if a gust occurs.\n• Be proactive. It may be safer to pull over and wait for the storm to pass."
                }
            },

    {
        question: "Câu 170: Theo Sổ Tay Lái Xe California, hành động nào sau đây là không an toàn khi lái xe trong điều kiện sương mù dày đặc hoặc khói?",
        options: [
            "A. Sử dụng đèn pha cận thay vì đèn pha xa",
            "B. Tăng khoảng cách theo sau giữa các xe",
            "C. Chỉ bật đèn đỗ xe hoặc đèn sương mù",
            "D. Giảm tốc độ và sẵn sàng dừng xe trong phạm vi tầm nhìn của bạn"
        ],
        correctAnswer: 2, // C
        questionEn: "Question 170: According to the California Driver's Handbook, which of the following is an unsafe practice when driving in heavy fog or smoke conditions?",
        optionsEn: [
            "A. Using your low-beam headlights instead of high beams",
            "B. Increasing your following distance between vehicles",
            "C. Driving with only your parking lights or fog lights on",
            "D. Slowing down and being prepared to stop within your range of vision"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 64: Sương Mù hoặc Khói Dày Đặc\nTốt nhất là tránh lái xe trong sương mù dày đặc hoặc khói. Hãy cân nhắc hoãn chuyến đi cho đến khi sương mù tan. Nếu bạn buộc phải lái xe trong sương mù dày đặc hoặc khói:\n• Lái xe chậm.\n• Sử dụng đèn pha cận. Đèn pha xa sẽ phản chiếu lại và gây chói mắt.\n• Không bao giờ lái xe chỉ sử dụng đèn đỗ hoặc đèn sương mù.\n• Đảm bảo bạn có thể dừng lại trong phạm vi không gian mà bạn có thể nhìn thấy phía trước.\n• Tăng khoảng cách theo sau của bạn.\n• Sử dụng cần gạt nước kính chắn gió và bộ phận làm tan sương khi cần thiết.\n• Tránh chuyển làn hoặc vượt xe trừ khi thực sự cần thiết.\n• Lắng nghe tiếng xe cộ mà bạn không thể nhìn thấy.\nNếu sương mù trở nên quá dày đặc để lái xe an toàn, hãy cân nhắc việc tấp xe vào lề đường. Bật đèn báo nguy khẩn cấp và chờ cho đến khi điều kiện cải thiện.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 64: Fog or Heavy Smoke\nIt is best to avoid driving in heavy fog or smoke. Consider postponing your trip until the fog clears. If you must drive in heavy fog or smoke:\n• Drive slowly.\n• Use your low-beam headlights. High-beam headlights will reflect back and cause glare.\n• Never drive using only your parking or fog lights.\n• Make sure you can stop within the space you can see ahead.\n• Increase your following distance.\n• Use your windshield wipers and defroster as necessary.\n• Avoid crossing lanes or passing traffic unless absolutely necessary.\n• Listen for traffic you cannot see.\nIf the fog becomes too thick to drive safely, consider pulling off the road. Activate your emergency flashers and wait for conditions to improve."
        }
    },
    {
        question: "Câu 171: Theo Sổ Tay Lái Xe California, nếu bạn thấy sĩ quan thực thi pháp luật tạo ra một đoạn ngắt giao thông bằng cách bật đèn khẩn cấp và lượn qua các làn đường, bạn nên làm gì?",
        options: [
            "A. Ngay lập tức rẽ vào lề gần nhất và chờ cho sĩ quan đi qua",
            "B. Bật đèn cảnh báo khẩn cấp của bạn, giảm tốc độ dần để khớp với tốc độ của sĩ quan, duy trì khoảng cách an toàn, và không vượt cho đến khi sĩ quan tắt đèn khẩn cấp",
            "C. Chuyển sang làn phải nhất và tiếp tục đi ở tốc độ giảm cho đến khi luồng giao thông trở lại bình thường",
            "D. Chớp đèn pha để cảnh báo xe đối diện, sau đó vượt qua xe tuần tra khi an toàn"
        ],
        correctAnswer: 1, // B
        questionEn: "Question 171: According to the California Driver's Handbook, what should you do when a law enforcement officer creates a traffic break by turning on emergency lights and weaving across lanes?",
        optionsEn: [
            "A. Immediately pull over to the nearest shoulder and wait for the officer to pass",
            "B. Turn on your emergency flashers, gradually reduce your speed to match the officer's, maintain a safe distance, and do not pass until the officer turns off their emergency lights",
            "C. Move to the furthest right lane and continue at a reduced speed until normal traffic flow resumes",
            "D. Flash your headlights to alert oncoming traffic, then proceed around the patrol vehicle when safe"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 64: Ngắt Giao Thông của Lực Lượng Thực Thi Pháp Luật\nTrong một đoạn ngắt giao thông, sĩ quan bật đèn khẩn cấp và lượn chậm qua các làn đường. Lực lượng thực thi pháp luật sử dụng ngắt giao thông để:\n• Làm chậm hoặc dừng giao thông để loại bỏ các nguy hiểm khỏi đường.\n• Làm chậm hoặc dừng giao thông trong sương mù dày đặc hoặc điều kiện giao thông bất thường.\n• Ngăn ngừa va chạm trong điều kiện bất thường.\nBạn nên:\n• Bật đèn cảnh báo khẩn cấp để cảnh báo các lái xe khác.\n• Từ từ giảm tốc độ xuống bằng với tốc độ của sĩ quan. Không phanh đột ngột trừ khi cần thiết để tránh va chạm. Giữ khoảng cách an toàn với xe tuần tra phía trước bạn.\n• Không vượt qua xe tuần tra. Không tăng tốc cho đến khi sĩ quan tắt đèn khẩn cấp và điều kiện giao thông cho phép bạn trở lại tốc độ bình thường.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 64: Law Enforcement Traffic Breaks\nDuring a traffic break, the officer turns on their emergency lights and slowly weaves across lanes. Law enforcement uses traffic breaks to:\n• Slow or stop traffic to remove hazards from the road.\n• Slow or stop traffic during heavy fog or unusual traffic conditions.\n• Prevent collisions during unusual conditions.\nYou should:\n• Turn on your emergency flashers to warn other drivers.\n• Slowly decrease your speed to the same speed as the officer. Do not brake suddenly unless necessary to avoid a collision. Keep a safe distance from the patrol vehicle ahead of you.\n• Not drive past the patrol vehicle. Do not speed up until the officer turns off their emergency lights and traffic conditions allow you to return to your normal speed."
        }
    },
    {
        question: "Câu 172: Theo Sổ Tay Lái Xe California, quy định về dây an toàn cho người ngồi trên xe ở California là gì, và tài xế có trách nhiệm đặc biệt nào đối với hành khách nhỏ tuổi?",
        options: [
            "A. Tài xế phải đeo dây an toàn, nhưng hành khách có quyền lựa chọn đeo hay không",
            "B. Tất cả người ngồi trên xe phải đeo dây an toàn, và tài xế có thể bị phạt nếu hành khách dưới 16 tuổi không đeo dây an toàn",
            "C. Chỉ những người ngồi ở ghế trước mới bắt buộc phải đeo dây an toàn bất kể độ tuổi",
            "D. Dây an toàn bắt buộc đối với tài xế và hành khách trưởng thành, nhưng không bắt buộc đối với hành khách dưới 18 tuổi"
        ],
        correctAnswer: 1, // B
        questionEn: "Question 172: According to the California Driver's Handbook, what are the seat belt requirements for vehicle occupants in California, and what special responsibility does a driver have regarding younger passengers?",
        optionsEn: [
            "A. The driver must wear a seat belt, but passengers can choose whether to buckle up",
            "B. All occupants must wear seat belts, and the driver can receive a ticket if a passenger under 16 years old is not wearing their seat belt",
            "C. Only front-seat occupants are required to wear seat belts regardless of age",
            "D. Seat belts are required for the driver and adult passengers, but optional for passengers under 18"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 65: Bảo Vệ Bản Thân và Hành Khách của Bạn\nDây An Toàn\nBạn và hành khách của bạn phải đeo dây an toàn. Bạn có thể bị phạt nếu không đeo. Nếu hành khách của bạn dưới 16 tuổi, bạn cũng có thể bị phạt nếu họ không đeo dây an toàn.\nĐeo dây đai ngang và dây đai vai của dây an toàn sẽ tăng cơ hội sống sót của bạn trong hầu hết các loại va chạm.\nKhi bạn gặp va chạm, phương tiện của bạn dừng lại. Nhưng bạn vẫn tiếp tục di chuyển với cùng tốc độ mà bạn đang đi. Bạn chỉ dừng lại khi bạn đâm vào bảng điều khiển hoặc kính chắn gió. Nếu bạn bị va đập từ bên hông, tác động có thể đẩy bạn qua lại trên ghế. Dây đai an toàn và dây đai vai giữ bạn ở vị trí tốt hơn để kiểm soát phương tiện. Chúng cũng có thể giảm thiểu thương tích nghiêm trọng.\nĐiều quan trọng là đeo dây an toàn đúng cách để tránh thương tích hoặc tử vong:\n• Đeo dây đai vai qua vai và ngực. Nên có ít hoặc không có độ chùng. Không đeo dây đai vai dưới cánh tay hoặc sau lưng.\n• Điều chỉnh dây đai ngang sao cho nó vừa vặn và nằm thấp qua hông của bạn. Nếu không, bạn có thể trượt ra khỏi dây đai trong một vụ va chạm.\n• Nếu bạn đang mang thai, hãy đeo dây đai ngang càng thấp càng tốt dưới bụng. Đặt dây đai vai giữa ngực và sang một bên của bụng.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 65: Protect Yourself and Your Passengers\nSeat Belts\nYou and your passengers must wear seat belts. You can get a ticket if you do not. If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt.\nWearing the lap belt and shoulder harness of a seat belt will increase your chance of survival in most types of collisions.\nWhen you are in a collision, your vehicle stops. But you keep moving at the same speed you were traveling. You only stop when you hit the dashboard or windshield. If you are struck from the side, the impact could push you back and forth across the seat. Seat and shoulder belts keep you in a better position to control the vehicle. They may also minimize serious injuries.\nIt is important to wear the seat belt correctly to avoid injury or death:\n• Wear the shoulder harness across your shoulder and chest. There should be little to no slack. Do not wear the shoulder belt under your arm or behind your back.\n• Adjust the lap belt so that it is snug and lies low across your hips. Otherwise you might slide out of the belt in a crash.\n• If you are pregnant, wear the lap belt as low as possible under your abdomen. Place the shoulder strap between your breasts and to the side of your abdomen's bulge."
        }
    },
    {
        question: "Câu 173: Theo Sổ Tay Lái Xe California, lợi ích chính của việc đeo đúng cả dây đai ngang và dây đai vai là gì?",
        options: [
            "A. Chúng giảm số lần bị phạt vi phạm giao thông nhưng chỉ cung cấp sự bảo vệ hạn chế trong các va chạm nghiêm trọng",
            "B. Chúng tăng cơ hội sống sót của bạn trong hầu hết các vụ va chạm và giúp giữ bạn ở vị trí thích hợp để điều khiển phương tiện",
            "C. Chúng chủ yếu bảo vệ hành khách hơn là người lái trong các va chạm từ bên hông",
            "D. Chúng chỉ cung cấp bảo vệ trong va chạm trực diện nhưng không trong các loại va chạm khác"
        ],
        correctAnswer: 1, // B
        questionEn: "Question 173: According to the California Driver's Handbook, what are the primary benefits of wearing both the lap belt and shoulder harness properly?",
        optionsEn: [
            "A. They reduce traffic citations but provide limited protection in severe collisions",
            "B. They increase your chance of survival in most collisions and help keep you in position to control the vehicle",
            "C. They primarily protect passengers rather than the driver in side-impact collisions",
            "D. They only provide protection in head-on collisions but not in other crash types"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 65: Bảo Vệ Bản Thân và Hành Khách của Bạn\nDây An Toàn\nBạn và hành khách của bạn phải đeo dây an toàn. Bạn có thể bị phạt nếu không đeo. Nếu hành khách của bạn dưới 16 tuổi, bạn cũng có thể bị phạt nếu họ không đeo dây an toàn.\nĐeo dây đai ngang và dây đai vai của dây an toàn sẽ tăng cơ hội sống sót của bạn trong hầu hết các loại va chạm.\nKhi bạn gặp va chạm, phương tiện của bạn dừng lại. Nhưng bạn vẫn tiếp tục di chuyển với cùng tốc độ mà bạn đang đi. Bạn chỉ dừng lại khi bạn đâm vào bảng điều khiển hoặc kính chắn gió. Nếu bạn bị va đập từ bên hông, tác động có thể đẩy bạn qua lại trên ghế. Dây đai an toàn và dây đai vai giữ bạn ở vị trí tốt hơn để kiểm soát phương tiện. Chúng cũng có thể giảm thiểu thương tích nghiêm trọng.\nĐiều quan trọng là đeo dây an toàn đúng cách để tránh thương tích hoặc tử vong:\n• Đeo dây đai vai qua vai và ngực. Nên có ít hoặc không có độ chùng. Không đeo dây đai vai dưới cánh tay hoặc sau lưng.\n• Điều chỉnh dây đai ngang sao cho nó vừa vặn và nằm thấp qua hông của bạn. Nếu không, bạn có thể trượt ra khỏi dây đai trong một vụ va chạm.\n• Nếu bạn đang mang thai, hãy đeo dây đai ngang càng thấp càng tốt dưới bụng. Đặt dây đai vai giữa ngực và sang một bên của bụng.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 65: Protect Yourself and Your Passengers\nSeat Belts\nYou and your passengers must wear seat belts. You can get a ticket if you do not. If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt.\nWearing the lap belt and shoulder harness of a seat belt will increase your chance of survival in most types of collisions.\nWhen you are in a collision, your vehicle stops. But you keep moving at the same speed you were traveling. You only stop when you hit the dashboard or windshield. If you are struck from the side, the impact could push you back and forth across the seat. Seat and shoulder belts keep you in a better position to control the vehicle. They may also minimize serious injuries.\nIt is important to wear the seat belt correctly to avoid injury or death:\n• Wear the shoulder harness across your shoulder and chest. There should be little to no slack. Do not wear the shoulder belt under your arm or behind your back.\n• Adjust the lap belt so that it is snug and lies low across your hips. Otherwise you might slide out of the belt in a crash.\n• If you are pregnant, wear the lap belt as low as possible under your abdomen. Place the shoulder strap between your breasts and to the side of your abdomen's bulge."
        }
    },
    {
        question: "Câu 174: Theo Sổ Tay Lái Xe California, cách đeo phần dây đai vai (shoulder harness) của dây an toàn đúng là gì?",
        options: [
            "A. Đặt chéo qua vai và ngực với độ chùng tối thiểu",
            "B. Đặt dưới cánh tay để giảm nguy cơ chấn thương cổ trong va chạm",
            "C. Đặt sau lưng nếu nó gây khó chịu trên ngực",
            "D. Điều chỉnh lỏng lẻo trên phần trên cơ thể để cho phép tự do cử động"
        ],
        correctAnswer: 0, // A
        questionEn: "Question 174: According to the California Driver's Handbook, what is the correct way to wear a shoulder harness portion of a seat belt?",
        optionsEn: [
            "A. Positioned across your shoulder and chest with minimal slack",
            "B. Placed under your arm to reduce potential neck injuries in a collision",
            "C. Positioned behind your back if it causes discomfort across the chest",
            "D. Adjusted loosely across the upper body to allow freedom of movement"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 65: Bảo Vệ Bản Thân và Hành Khách của Bạn\nDây An Toàn\nBạn và hành khách của bạn phải đeo dây an toàn. Bạn có thể bị phạt nếu không đeo. Nếu hành khách của bạn dưới 16 tuổi, bạn cũng có thể bị phạt nếu họ không đeo dây an toàn.\nĐeo dây đai ngang và dây đai vai của dây an toàn sẽ tăng cơ hội sống sót của bạn trong hầu hết các loại va chạm.\nKhi bạn gặp va chạm, phương tiện của bạn dừng lại. Nhưng bạn vẫn tiếp tục di chuyển với cùng tốc độ mà bạn đang đi. Bạn chỉ dừng lại khi bạn đâm vào bảng điều khiển hoặc kính chắn gió. Nếu bạn bị va đập từ bên hông, tác động có thể đẩy bạn qua lại trên ghế. Dây đai an toàn và dây đai vai giữ bạn ở vị trí tốt hơn để kiểm soát phương tiện. Chúng cũng có thể giảm thiểu thương tích nghiêm trọng.\nĐiều quan trọng là đeo dây an toàn đúng cách để tránh thương tích hoặc tử vong:\n• Đeo dây đai vai qua vai và ngực. Nên có ít hoặc không có độ chùng. Không đeo dây đai vai dưới cánh tay hoặc sau lưng.\n• Điều chỉnh dây đai ngang sao cho nó vừa vặn và nằm thấp qua hông của bạn. Nếu không, bạn có thể trượt ra khỏi dây đai trong một vụ va chạm.\n• Nếu bạn đang mang thai, hãy đeo dây đai ngang càng thấp càng tốt dưới bụng. Đặt dây đai vai giữa ngực và sang một bên của bụng.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 65: Protect Yourself and Your Passengers\nSeat Belts\nYou and your passengers must wear seat belts. You can get a ticket if you do not. If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt.\nWearing the lap belt and shoulder harness of a seat belt will increase your chance of survival in most types of collisions.\nWhen you are in a collision, your vehicle stops. But you keep moving at the same speed you were traveling. You only stop when you hit the dashboard or windshield. If you are struck from the side, the impact could push you back and forth across the seat. Seat and shoulder belts keep you in a better position to control the vehicle. They may also minimize serious injuries.\nIt is important to wear the seat belt correctly to avoid injury or death:\n• Wear the shoulder harness across your shoulder and chest. There should be little to no slack. Do not wear the shoulder belt under your arm or behind your back.\n• Adjust the lap belt so that it is snug and lies low across your hips. Otherwise you might slide out of the belt in a crash.\n• If you are pregnant, wear the lap belt as low as possible under your abdomen. Place the shoulder strap between your breasts and to the side of your abdomen's bulge."
        }
    },
    {
        question: "Câu 175: Theo Sổ Tay Lái Xe California, cách đeo dây an toàn đúng cho người mang thai là gì?",
        options: [
            "A. Đặt dây đai ngang qua giữa bụng, còn dây đai vai để như bình thường",
            "B. Đặt cả dây đai ngang và dây đai vai lỏng lẻo để tránh áp lực lên bụng",
            "C. Đặt dây đai ngang thấp nhất có thể dưới bụng, còn dây đai vai đi giữa hai bầu ngực và sang một bên bụng",
            "D. Chỉ sử dụng dây đai vai trong tam cá nguyệt thứ ba để bảo vệ tránh chấn thương bụng"
        ],
        correctAnswer: 2, // C
        questionEn: "Question 175: According to the California Driver's Handbook, what is the correct way for a pregnant person to wear a seat belt?",
        optionsEn: [
            "A. Place the lap belt across the middle of the abdomen with the shoulder belt positioned normally",
            "B. Place both the lap belt and shoulder belt loosely to avoid putting pressure on the abdomen",
            "C. Place the lap belt as low as possible under the abdomen, with the shoulder belt positioned between the breasts and to the side of the abdomen",
            "D. Use only the shoulder belt during the third trimester to protect against abdominal injury"
        ],
        handbookRef: {
            vi: "Nguồn: SỔ TAY LÁI XE CALIFORNIA, Trang 65: Bảo Vệ Bản Thân và Hành Khách của Bạn\nDây An Toàn\nBạn và hành khách của bạn phải đeo dây an toàn. Bạn có thể bị phạt nếu không đeo. Nếu hành khách của bạn dưới 16 tuổi, bạn cũng có thể bị phạt nếu họ không đeo dây an toàn.\nĐeo dây đai ngang và dây đai vai của dây an toàn sẽ tăng cơ hội sống sót của bạn trong hầu hết các loại va chạm.\nKhi bạn gặp va chạm, phương tiện của bạn dừng lại. Nhưng bạn vẫn tiếp tục di chuyển với cùng tốc độ mà bạn đang đi. Bạn chỉ dừng lại khi bạn đâm vào bảng điều khiển hoặc kính chắn gió. Nếu bạn bị va đập từ bên hông, tác động có thể đẩy bạn qua lại trên ghế. Dây đai an toàn và dây đai vai giữ bạn ở vị trí tốt hơn để kiểm soát phương tiện. Chúng cũng có thể giảm thiểu thương tích nghiêm trọng.\nĐiều quan trọng là đeo dây an toàn đúng cách để tránh thương tích hoặc tử vong:\n• Đeo dây đai vai qua vai và ngực. Nên có ít hoặc không có độ chùng. Không đeo dây đai vai dưới cánh tay hoặc sau lưng.\n• Điều chỉnh dây đai ngang sao cho nó vừa vặn và nằm thấp qua hông của bạn. Nếu không, bạn có thể trượt ra khỏi dây đai trong một vụ va chạm.\n• Nếu bạn đang mang thai, hãy đeo dây đai ngang càng thấp càng tốt dưới bụng. Đặt dây đai vai giữa ngực và sang một bên của bụng.",
            en: "Source: CALIFORNIA DRIVER'S HANDBOOK, Page 65: Protect Yourself and Your Passengers\nSeat Belts\nYou and your passengers must wear seat belts. You can get a ticket if you do not. If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt.\nWearing the lap belt and shoulder harness of a seat belt will increase your chance of survival in most types of collisions.\nWhen you are in a collision, your vehicle stops. But you keep moving at the same speed you were traveling. You only stop when you hit the dashboard or windshield. If you are struck from the side, the impact could push you back and forth across the seat. Seat and shoulder belts keep you in a better position to control the vehicle. They may also minimize serious injuries.\nIt is important to wear the seat belt correctly to avoid injury or death:\n• Wear the shoulder harness across your shoulder and chest. There should be little to no slack. Do not wear the shoulder belt under your arm or behind your back.\n• Adjust the lap belt so that it is snug and lies low across your hips. Otherwise you might slide out of the belt in a crash.\n• If you are pregnant, wear the lap belt as low as possible under your abdomen. Place the shoulder strap between your breasts and to the side of your abdomen's bulge."
        }
    }    





        ];

        // Quiz variables
        let currentQuestion = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let language = 'vi'; // Default language
        let answered = false;
        
        // DOM Elements
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const progressFill = document.getElementById('progress-fill');
        const handbookReferenceVi = document.getElementById('handbook-reference-vi');
        const handbookReferenceEn = document.getElementById('handbook-reference-en');
        const btnVietnamese = document.getElementById('btn-vietnamese');
        const btnEnglish = document.getElementById('btn-english');
        const titleVi = document.getElementById('title-vi');
        const titleEn = document.getElementById('title-en');
        const progressTextVi = document.getElementById('progress-text-vi');
        const progressTextEn = document.getElementById('progress-text-en');
        const statsTextVi = document.getElementById('stats-text-vi');
        const statsTextEn = document.getElementById('stats-text-en');
        const prevBtnVi = document.getElementById('prev-btn-vi');
        const nextBtnVi = document.getElementById('next-btn-vi');
        const prevBtnEn = document.getElementById('prev-btn-en');
        const nextBtnEn = document.getElementById('next-btn-en');
        
        // Initialize quiz
        function loadQuestion() {
            answered = false;
            const questionData = quizData[currentQuestion];
            
            // Update progress
            const progressPercent = ((currentQuestion + 1) / quizData.length) * 100;
            progressFill.style.width = `${progressPercent}%`;
            progressTextVi.textContent = `Câu hỏi ${currentQuestion + 1}/${quizData.length}`;
            progressTextEn.textContent = `Question ${currentQuestion + 1}/${quizData.length}`;
            
            // Display question and options
            if (language === 'vi') {
                questionElement.textContent = questionData.question;
                handbookReferenceVi.textContent = questionData.handbookRef.vi;
                handbookReferenceVi.classList.remove('hide');
                handbookReferenceEn.classList.add('hide');
                
                // Clear and add new options
                optionsElement.innerHTML = '';
                questionData.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('option');
                    optionDiv.textContent = option;
                    optionDiv.onclick = function() { selectOption(index); };
                    optionsElement.appendChild(optionDiv);
                });
            } else {
                questionElement.textContent = questionData.questionEn;
                handbookReferenceEn.textContent = questionData.handbookRef.en;
                handbookReferenceEn.classList.remove('hide');
                handbookReferenceVi.classList.add('hide');
                
                // Clear and add new options
                optionsElement.innerHTML = '';
                questionData.optionsEn.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('option');
                    optionDiv.textContent = option;
                    optionDiv.onclick = function() { selectOption(index); };
                    optionsElement.appendChild(optionDiv);
                });
            }
            
            // Update button states
            prevBtnVi.disabled = currentQuestion === 0;
            prevBtnEn.disabled = currentQuestion === 0;
            nextBtnVi.disabled = currentQuestion === quizData.length - 1;
            nextBtnEn.disabled = currentQuestion === quizData.length - 1;
        }
        
        // Select option function
        function selectOption(selectedIndex) {
            if (answered) return;
            answered = true;
            
            const options = document.querySelectorAll('.option');
            const correctAnswer = quizData[currentQuestion].correctAnswer;
            
            // Mark selected option
            options[selectedIndex].classList.add('selected');
            
            // Check if correct
            if (selectedIndex === correctAnswer) {
                options[selectedIndex].classList.add('correct');
                correctAnswers++;
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[correctAnswer].classList.add('correct');
                wrongAnswers++;
            }
            
            // Update stats
            statsTextVi.textContent = `Đúng: ${correctAnswers} | Sai: ${wrongAnswers}`;
            statsTextEn.textContent = `Correct: ${correctAnswers} | Wrong: ${wrongAnswers}`;
        }
        
        // Navigation functions
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                loadQuestion();
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }
        
        // Set language function
        function setLanguage(lang) {
            language = lang;
            
            if (lang === 'vi') {
                btnVietnamese.classList.add('active');
                btnEnglish.classList.remove('active');
                
                titleVi.classList.remove('hide');
                titleEn.classList.add('hide');
                
                progressTextVi.classList.remove('hide');
                progressTextEn.classList.add('hide');
                
                statsTextVi.classList.remove('hide');
                statsTextEn.classList.add('hide');
                
                prevBtnVi.classList.remove('hide');
                nextBtnVi.classList.remove('hide');
                
                prevBtnEn.classList.add('hide');
                nextBtnEn.classList.add('hide');
            } else {
                btnVietnamese.classList.remove('active');
                btnEnglish.classList.add('active');
                
                titleVi.classList.add('hide');
                titleEn.classList.remove('hide');
                
                progressTextVi.classList.add('hide');
                progressTextEn.classList.remove('hide');
                
                statsTextVi.classList.add('hide');
                statsTextEn.classList.remove('hide');
                
                prevBtnVi.classList.add('hide');
                nextBtnVi.classList.add('hide');
                
                prevBtnEn.classList.remove('hide');
                nextBtnEn.classList.remove('hide');
            }
            
            // Reload current question with new language
            loadQuestion();
        }
        
        // Event listeners
        btnVietnamese.addEventListener('click', () => setLanguage('vi'));
        btnEnglish.addEventListener('click', () => setLanguage('en'));
        prevBtnVi.addEventListener('click', prevQuestion);
        nextBtnVi.addEventListener('click', nextQuestion);
        prevBtnEn.addEventListener('click', prevQuestion);
        nextBtnEn.addEventListener('click', nextQuestion);
        
        // Initialize the quiz
        document.addEventListener('DOMContentLoaded', function() {
            loadQuestion();
        });
    </script>
</body>
</html>